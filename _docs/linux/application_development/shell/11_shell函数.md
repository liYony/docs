# shell函数

## 1定义函数

linux中的shell同样可以定义函数，然后在函数中调用执行相关的shell命令，完成功能，shell中的函数调用格式如下：

```bash
[ function ] funname [()]
{
    action;
    [return int;]
}
```

参数说明：

- function fun () 表示有返回参数的函数（如同C语言中的有返回类型的函数（int，char等））
- fun() 表示无返回参数的函数（类似于C语言中的void类型函数）
- 使用return可以返回参数值（一般为数值n），如果不使用，将默认以最后一条命令运行的结果作为返回值

```bash
#!/bin/bash
 
FunReturn(){
    echo "两个数字进行相加运算..."
    echo "输入第一个数字: "
    read num
    echo "输入第二个数字: "
    read anothernum
    echo "两个数字分别为 $num 和 $anothernum !"
    return $(($num+$anothernum))	# 分别返回数值
}
FunReturn		# 调用函数
echo "输入的两个数字之和为 $? !" # 使用通配符获取上一条指令的返回值
```

> 注意：
> 所有的函数在使用前必须定义，这是因为shell解释器是顺序逐层执行的，当shell解释器发现定义的函数时，才会找到其对应的功能，进而执行。

## 2 参数定义

此外想要使用shell函数传递参数时，需要在函数体的内部，通过 $n 的形式来获取参数的值，与其他语言不同的是，这不是在定义函数的时候就给定参数，而是在函数体中获取到的参数，例如，$1表示第一个参数，$2表示第二个参数，参数调用列表如下：

参数处理 | 说明
--------|------
$# | 传递到脚本或函数的参数个数
$* | 以一个单字符串显示所有向脚本传递的参数
\$$ | 脚本运行的当前进程ID号
$! | 后台运行的最后一个进程的ID号
$@ | 与$*相同，但是使用时加引号，并在引号中返回每个参数。
$- | 显示Shell使用的当前选项，与set命令功能相同。
$? | 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。

```bash
#!/bin/bash
FunParam(){
    echo "输入第一个参数 $1 !"
    echo "输入第二个参数 $2 !"
    echo "输入第十个个参数 $10 !"
    echo "参数总数共 $# 个!"
    echo "作为一个字符串输出所有参数 $* !"
}
FunParam 1 2 3 4 5 6 7 8 9 10
```
